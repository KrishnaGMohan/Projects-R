readPath <- rxGetOption("sampleDataDir")
readPath
ncdb2012Csv <- file.path(rxGetOption("sampleDataDir"), "2007_subset.csv")
ncdb2012Csv
# Declare the file paths for the csv and xdf files
ncdb2012Csv <- file.path("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase", "ncdb_2012.csv")
ncdb2012Xdf <- file.path("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase", "ncdb_2012.xdf")
# Use rxImport to import the data into xdf format
rxImport(inData = ncdb2012Csv, outFile = ncdb2012Xdf, overwrite = TRUE)
list.files()
str(ncdb2012Xdf)
rxGetInfo(data = ncdb2012Xdf,
          getVarInfo = TRUE,
          numRows = 10)
# Declare the file paths for the csv and xdf files
ncdb1999to2012Csv <- file.path("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase", "NCDB_1999_to_2012.csv")
ncdb1999to2012Xdf <- file.path("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase", "NCDB_1999_to_2012.xdf")
# Use rxImport to import the data into xdf format
rxImport(inData = ncdb1999to2012Csv, outFile = ncdb1999to2012Xdf, overwrite = TRUE)
rxGetInfo(data = ncdb1999to2012Xdf,
          getVarInfo = TRUE,
          numRows = 10)
getwd()
?rxOptions
if (file.exists(dataPath, "ncdb2012Xdf")) file.remove(dataPath, "ncdb2012Xdf")
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdb2012Xdf <- file.path(dataPath, "ncdb_2012.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(dataPath, "ncdb2012Xdf")) file.remove(dataPath, "ncdb2012Xdf")
?file.exists
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdb2012Xdf <- file.path(dataPath, "ncdb_2012.xdf")
?file.exists
# Use rxImport to import the data into xdf format
if (file.exists(ncdb2012Xdf)) file.remove(ncdb2012Xdf)
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdb2012Xdf <- file.path(dataPath, "ncdb_2012.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdb2012Xdf)) file.remove(ncdb2012Xdf)
rxImport(inData = ncdb2012Csv, outFile = ncdb2012Xdf, overwrite = TRUE)
rxGetInfo(data = ncdb2012Xdf,
          getVarInfo = TRUE,
          numRows = 10)
ncdb1999to2012Csv <- file.path(dataPath, "NCDB_1999_to_2012.csv")
ncdb1999to2012Xdf <- file.path(dataPath, "NCDB_1999_to_2012.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdb1999to2012Xdf)) file.remove(ncdb2012Xdf)
rxImport(inData = ncdb1999to2012Csv, outFile = ncdb1999to2012Xdf, overwrite = TRUE)
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdb2012Xdf <- file.path(dataPath, "ncdb_2012.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdb2012Xdf)) file.remove(ncdb2012Xdf)
rxImport(inData = ncdb2012Csv, outFile = ncdb2012Xdf, overwrite = TRUE)
rxGetInfo(data = ncdb2012Xdf,
          getVarInfo = TRUE,
          numRows = 10)
rxGetInfo(data = ncdb1999to2012Xdf,
          getVarInfo = TRUE,
          numRows = 10)
?rxImport
rxGetInfo(data = ncdb2012Xdf,
          getVarInfo = TRUE,
          numRows = 1)
# Declare the file paths for the csv and xdf files
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
# Declare the file paths for the csv and xdf files
ncdb1999to2012Csv <- file.path(dataPath, "NCDB_1999_to_2012.csv")
ncdb1999to2012Xdf <- file.path(dataPath, "NCDB_1999_to_2012.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdb1999to2012Xdf)) file.remove(ncdb1999to2012Xdf)
rxImport(inData = ncdb1999to2012Csv, outFile = ncdb1999to2012Xdf, overwrite = TRUE)
rxGetInfo(data = ncdb1999to2012Xdf,
          getVarInfo = TRUE,
          numRows = 10)
? RxTextData
?RxXdfData
rxImport(inData = ncdb2012Csv, outFile = ncdb1999to2012Xdf, append = "rows")
rxGetInfo(data = ncdb1999to2012Xdf,
          getVarInfo = TRUE,
          numRows = 1)
# Declare the file paths for the csv and xdf files
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
# Declare the file paths for the csv and xdf files
ncdb1999to2012Csv <- file.path(dataPath, "NCDB_1999_to_2012.csv")
ncdb1999to2012Xdf <- file.path(dataPath, "NCDB_1999_to_2012.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdb1999to2012Xdf)) file.remove(ncdb1999to2012Xdf)
rxImport(inData = ncdb1999to2012Csv, outFile = ncdb1999to2012Xdf, overwrite = TRUE)
rxGetInfo(data = ncdb1999to2012Xdf)
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
rxImport(inData = ncdb2012Csv, outFile = ncdb1999to2012Xdf, append = "rows")
rxGetInfo(data = ncdb1999to2012Xdf)
rxGetVarInfo(data = ncdb1999to2012Xdf)
ncdbCsvDF <- RxTextData(ncdb1999to2012Csv)
head(ncdbCsvDF)
str(ncdbCsvDF)
rxGetInfo(ncdbCsvDF)
rxGetVarInfo(ncdbCsvDF)
rxSummary(ncdbCsvDF)
nrow(ncdbCsvDF)
NROW(ncdbCsvDF)
rxGetInfo(ncdb1999to2012Csv)
str(ncdbCsvDF)
ncdbDF1999to2012Csv <- RxTextData(ncdb1999to2012Csv)
ncdbDF2012 <- RxTextData(ncdb2012Csv)
ncdbAllDF <- rbind(ncdbDF1999to2012Csv, ncdbDF2012)
head(ncdbDF2012)
head(ncdbDF1999to2012Csv)
tail(ncdbDF1999to2012Csv)
if (file.exists(ncdb1999to2012Xdf)) file.remove(ncdb1999to2012Xdf)
# Declare the file paths for the csv and xdf files
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
# Declare the file paths for the csv and xdf files
ncdb1999to2012Csv <- file.path(dataPath, "NCDB_1999_to_2012.csv")
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdbAllXdf <- file.path(dataPath, "ncdb_ALL.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdbAllXdf)) file.remove(ncdbAllXdf)
rxImport(inData = ncdb1999to2012Csv, outFile = ncdbAllXdf, overwrite = TRUE)
rxGetInfo(data = ncdbAllXdf)
rxImport(inData = ncdb2012Csv, outFile = ncdbAllXdf, append = "rows")
rxGetInfo(data = ncdbAllXdf)
ncdbDF1999to2012Csv <- RxTextData(ncdb1999to2012Csv)
head(ncdbDF1999to2012Csv)
ncdbDFAll <- RxTextData(ncdbAllXdf)
haed(ncdbAllXdf)
ncdbDFAll <- RxTextData(ncdbAllXdf)
head(ncdbAllXdf)
ncdbDFAll <- RxXdfData(ncdbAllXdf)
head(ncdbAllXdf)
ncdbDFAll <- RxXdfData(ncdbAllXdf)
head(ncdbDFAll)
tail(ncdbDFAll)
# Declare the file paths for the csv and xdf files
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
# Declare the file paths for the csv and xdf files
ncdb1999to2012Csv <- file.path(dataPath, "NCDB_1999_to_2012.csv")
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdbAllXdf <- file.path(dataPath, "ncdb_ALL.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdbAllXdf)) file.remove(ncdbAllXdf)
rxImport(inData = ncdb1999to2012Csv, outFile = ncdbAllXdf, overwrite = TRUE)
rxGetInfo(data = ncdbAllXdf)
rxGetVarInfo(data = ncdbAllXdf)
#rxGetInfo(data = ncdbAllXdf, getVarInfo = TRUE, numRows = 5)
# Use rxImport to append the csv the data into xdf format
rxImport(inData = ncdb2012Csv, outFile = ncdbAllXdf, append = "rows", overwrite = TRUE)
rxGetInfo(data = ncdbAllXdf)
rxGetVarInfo(data = ncdbAllXdf)
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdb2012Xdf <- file.path(dataPath, "ncdb_2012.xdf")
if (file.exists(ncdb2012Xdf)) file.remove(ncdb2012Xdf)
rxImport(inData = ncdb2012Csv, outFile = ncdb2012Xdf, overwrite = TRUE)
rxGetInfo(ncdb2012Xdf)
tail(ncdb2012Xdf)
ncdb2012XdfDF <- RxXdfData(ncdb2012Xdf)
rxGetInfo(ncdb2012XdfDF)
tail(ncdb2012XdfDF)
head(ncdb2012XdfDF)
rxGetVarInfo(data = ncdbAllXdf)
if (file.exists(ncdb2012Xdf)) file.remove(ncdb2012Xdf)
# Declare the file paths for the csv and xdf files
dataPath <- c("D:/Personal/OneDrive/Projects/Sample_Databases/NationalCollisionDatabase")
# Declare the file paths for the csv and xdf files
ncdb1999to2012Csv <- file.path(dataPath, "NCDB_1999_to_2012.csv")
ncdb2012Csv <- file.path(dataPath, "ncdb_2012.csv")
ncdbAllXdf <- file.path(dataPath, "ncdb_ALL.xdf")
# Use rxImport to import the data into xdf format
if (file.exists(ncdbAllXdf)) file.remove(ncdbAllXdf)
rxImport(inData = ncdb1999to2012Csv, outFile = ncdbAllXdf, overwrite = TRUE)
rxGetInfo(data = ncdbAllXdf)
rxGetVarInfo(data = ncdbAllXdf)
#rxGetInfo(data = ncdbAllXdf, getVarInfo = TRUE, numRows = 5)
# Use rxImport to append the csv the data into xdf format
rxImport(inData = ncdb2012Csv, outFile = ncdbAllXdf, append = "rows", overwrite = TRUE)
rxGetInfo(data = ncdbAllXdf)
ncdbDF1999to2012Csv <- RxTextData(ncdb1999to2012Csv)
head(ncdbDF1999to2012Csv)
ncdbDFAll <- RxXdfData(ncdbAllXdf)
head(ncdbDFAll)
ncdbDFAllComplete < - complete.cases(ncdbDFAll)
ncdbDFAllComplete <- complete.cases(ncdbDFAll)
length(ncdbDFAll)
moreData <- TRUE  ncdbDFNextBlock <- rxReadNext(ncdbDFAll) while (moreData) {     ncdbDFNextBlock <- rxReadNext(ncdbDFAll)     length(ncdbDFNextBlock)     if (length(ncdbDFNextBlock) == 0) {         moreData <- FALSE    } }
moreData <- TRUE rxOpen(ncdbDFAll) ncdbDFNextBlock <- rxReadNext(ncdbDFAll) while (moreData) {     ncdbDFNextBlock <- rxReadNext(ncdbDFAll)     length(ncdbDFNextBlock)     if (length(ncdbDFNextBlock) == 0) {         moreData <- FALSE    } } rxClose(ncdbDFAll)
moreData <- TRUE rxOpen(ncdbDFAll) ncdbDFNextBlock <- rxReadNext(ncdbDFAll) blk <= 0 while (moreData) {     ncdbDFNextBlock <- rxReadNext(ncdbDFAll)     blk <- blk + length(ncdbDFNextBlock)     print(blk)     if (length(ncdbDFNextBlock) == 0) {         moreData <- FALSE    } } rxClose(ncdbDFAll) blk
moreData <- TRUE rxOpen(ncdbDFAll) ncdbDFNextBlock <- rxReadNext(ncdbDFAll) blk <- 0 while (moreData) {     ncdbDFNextBlock <- rxReadNext(ncdbDFAll)     blk <- blk + length(ncdbDFNextBlock)     print(blk)     if (length(ncdbDFNextBlock) == 0) {         moreData <- FALSE    } } rxClose(ncdbDFAll) blk
rxGetInfo(ncdbDFAll)
?rxDataStep
?rxSummary
rxGetVarInfo(ncdbDFAll)
sumOutFile <- tempfile(pattern = ".rxTempSumOut", fileext = ".xdf") rxSummary(C_YEAR, data = ncdbDFAll, blocksPerRead = 3, byGroupOutFile = sumOutFile, rowsPerBlock = 10)
rxSummary(~C_YEAR, data = ncdbDFAll, blocksPerRead = 3, byGroupOutFile = sumOutFile, rowsPerBlock = 10)
rxSummary( ~ C_YEAR, data = ncdbDFAll,  summaryStats = c("ValidObs"))
rxSummary( ~ C_YEAR + C_MNTH, data = ncdbDFAll,  summaryStats = c("ValidObs"))
rxSummary( ~ C_YEAR + C_MNTH, data = ncdbDFAll)
rxSummary( ~ C_YEAR : C_MNTH, data = ncdbDFAll)
rxSummary( ~ F(C_YEAR) , data = ncdbDFAll)
rxSummary( ~ F(C_YEAR):F(C_MNTH), data = ncdbDFAll)
rxGetVarInfo(ncdbDFAll)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite =  TRUE)
rxSummary( ~ C_YEAR, data = ncdbDFAnalysis)
rxSummary( ~F(C_YEAR), data = ncdbDFAnalysis)
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis)
rxGetVarInfo(ncdbDFAnalysis)
rxGetVarInfo(ncdbDFAnalysis)
# Lets select just a few columns for the years 2006 to 2010 ?rxDataStep rxGetVarInfo(ncdbDFAll) ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis)
rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis)
rxGetVarInfo(ncdbDFAll)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
newVarInfo <- c("Year", "Month", "WeekDay") rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newname = "Month"),                 C_WDAY = list(newname = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 0:6)))
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 0:6)),                                 overwrite = TRUE)
cdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 0:6)),                                 overwrite = TRUE)
rxGetVarInfo(ncdbDFAnalysis)
tail(ncdbDFAnalysis)
head(ncdbDFAnalysis)
complete.cases(ncdbDFAnalysis)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 & !is.na(C_MNTH),                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
# Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 & !is.na(C_MNTH) & !is.na(C_WKDAY),                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 & !is.na(C_MNTH) & !is.na(C_WKDAY),                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 & !is.na(C_MNTH) & !is.na(C_WDAY),                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis)
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 0:6)),                                 overwrite = TRUE)
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 1:7)),                                 overwrite = TRUE)
rxSummary( ~ F(Weekday), data = ncdbDFAnalysis)
rxSummary( ~ F(WeekDay), data = ncdbDFAnalysis)
rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis )
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 1:7)),                                 overwrite = TRUE)
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAnalysis, outFile = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 1:7)),                                 overwrite = TRUE)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 & !is.na(C_MNTH) & !is.na(C_WDAY),                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis)
ncdbDFAnalysis2 <- rxDataStep(inData = ncdbDFAnalysis,                                 transforms = list(WeekDay = factor(WeekDay, levels = 1:7)))
rxSummary( ~ F(WeekDay), data = ncdbDFAnalysis2)
tail(ncdbDFAnalysis2)
# Lets select just a all columns for the years 2006 to 2010 ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets select just a few columns for the years 2006 to 2010 ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 & !is.na(C_MNTH) & !is.na(C_WDAY),                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis)
rxSummary( ~ F(WeekDay), data = ncdbDFAnalysis)
rxSummary( ~ F(Month), data = ncdbDFAnalysis)
rxSummary( ~ F(Year), data = ncdbDFAnalysis)
set.seed(59) myData1 <- data.frame(x = rnorm(100), y = runif(100)) xmiss <- seq.int(from = 5, to = 100, by = 5) ymiss <- seq.int(from = 2, to = 100, by = 5) myData1$x[xmiss] <- NA myData1$y[ymiss] <- NA rxGetInfo(myData1, numRows = 5)
ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis)
rxGetInfo(ncdbDFAnalysis)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 & !is.na(C_MNTH) & !is.na(C_WDAY),                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis) rxSummary( ~ F(Year), data = ncdbDFAnalysis)
sumStats <- rxResultsDF(rxSummary( ~ ., myData1)) sumStats meanVals <- sumStats$Mean names(meanVals) <- row.names(sumStats)
rxSummary( ~ ., data = ncdbDFAnalysis)
tail(ncdbDFAnalysis)
ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010 ,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis)
rxSummary( ~ ., data = ncdbDFAnalysis)
# Lets select just a few columns for the years 2006 to 2010 # Missing data ncdbDFAnalysis <- file.path(dataPath, "ncdb_analysis.xdf") ncdbDFAnalysis <- rxDataStep(inData = ncdbDFAll, outFile = ncdbDFAnalysis,                                 rowSelection = C_YEAR >= 2006 & C_YEAR <= 2010,                                 varsToKeep = c("C_YEAR", "C_MNTH", "C_WDAY"),                                 overwrite = TRUE) rxSummary( ~ F(C_YEAR), data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) # Lets  give the columns new names newVarInfo <- list(                 C_YEAR = list(newName = "Year"),                 C_MNTH = list(newName = "Month"),                 C_WDAY = list(newName = "WeekDay")                 ) rxSetVarInfo(varInfo = newVarInfo, data = ncdbDFAnalysis) rxGetVarInfo(ncdbDFAnalysis) rxGetInfo(ncdbDFAnalysis) tail(ncdbDFAnalysis) rxSummary( ~ ., data = ncdbDFAnalysis)
# Create a data frame set.seed(59) myData <- data.frame(   x = rnorm(100),   y = runif(100),   z = rep(1:20, times = 5)) # Subset observations and variables myNewData <- rxDataStep(inData = myData,                          rowSelection = y > .5,                          varsToKeep = c("y", "z")) # Get information about the new data frame rxGetInfo(data = myNewData, getVarInfo = TRUE)
set.seed(59) myData1 <- data.frame(x = rnorm(100), y = runif(100)) xmiss <- seq.int(from = 5, to = 100, by = 5) ymiss <- seq.int(from = 2, to = 100, by = 5) myData1$x[xmiss] <- NA myData1$y[ymiss] <- NA rxGetInfo(myData1, numRows = 5)
rxGetInfo(myData1, numRows = 5)
# Compute the summary statistics and extract # the means in a named vector sumStats <- rxResultsDF(rxSummary( ~ ., myData1)) sumStats meanVals <- sumStats$Mean names(meanVals) <- row.names(sumStats)
myData2 <- rxDataStep(inData = myData1, transforms = list( x = ifelse(is.na(x), meanVals["x"], x), y = ifelse(is.na(y), meanVals["y"], y)), transformObjects = list(meanVals = meanVals)) rxGetInfo(myData2, numRows = 5)
# Remove Duplicates set.seed(17) users <- sample(c("Aiden", "Ella", "Jayden", "Ava", "Max", "Grace", "Riley",                   "Lolita", "Liam", "Emma", "Ethan", "Elizabeth", "Jack",                   "Genevieve", "Avery", "Aurora", "Dylan", "Isabella",                   "Caleb", "Bella"), 100, replace = TRUE) state <- sample(c("Washington", "California", "Texas", "North Carolina",                   "New York", "Massachusetts"), 100, replace = TRUE) transAmt <- round(runif(100) * 100, digits = 3) df <- data.frame(users = users, state = state, transAmt = transAmt) rxSort(df, sortByVars = c("users", "state"), removeDupKeys = TRUE,        dupFreqVar = "DUP_COUNT")
set.seed(17) users <- sample(c("Aiden", "Ella", "Jayden", "Ava", "Max", "Grace", "Riley",                   "Lolita", "Liam", "Emma", "Ethan", "Elizabeth", "Jack",                   "Genevieve", "Avery", "Aurora", "Dylan", "Isabella",                   "Caleb", "Bella"), 100, replace = TRUE) state <- sample(c("Washington", "California", "Texas", "North Carolina",                   "New York", "Massachusetts"), 100, replace = TRUE) transAmt <- round(runif(100) * 100, digits = 3) df <- data.frame(users = users, state = state, transAmt = transAmt)
df
rxSort(df, sortByVars = c("users", "state"), removeDupKeys = TRUE,        dupFreqVar = "DUP_COUNT")
df
